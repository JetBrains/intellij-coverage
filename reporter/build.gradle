plugins {
  id 'org.jetbrains.kotlin.jvm' version '1.7.21'
}

sourceCompatibility = 1.6
targetCompatibility = 1.6

sourceSets {
  test.java.srcDir 'test'
  test.resources.srcDir 'resources'
}

configurations {
  implementation.extendsFrom(externalDependencies)
}

dependencies {
  implementation project(":instrumentation")
  implementation project(":java6-utils")
  externalDependencies("org.jetbrains.intellij.deps:coverage-report:1.0.19")
  externalDependencies("org.json:json:20210307")

  testImplementation('junit:junit:4.13.2')
  testImplementation(files(project(":tests").sourceSets.test.output))
}

def getPublishDependencies() {
  configurations.getByName("externalDependencies").getResolvedConfiguration().getFirstLevelModuleDependencies()
}

jar {
  baseName = reporter_jar_name
  destinationDir = file("../dist")
}

task soursesJar(type: Jar, dependsOn: classes) {
  baseName = reporter_jar_name
  archiveClassifier = 'sources'
  from(sourceSets.main.allSource)
}

task javadocJar(type: Jar) {
  baseName = reporter_jar_name
  archiveClassifier = 'javadoc'
  from javadoc
}
